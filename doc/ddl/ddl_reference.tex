\section{Introduction}
The Demo Description Lines (DDL) is an abstract syntax which allows
to define an IPOL demo. The description is 
written in JSON (JavaScript Object Notation) format. The aim of this specification is to allow a maximum number of demos to be described without the
need to manually write HTML or Python code for a given demo. Each main key in the description file is described in the following sections:

\begin{itemize}
  \item \textit{general}: general options (required);
  \item \textit{build}: download and compile the source code (required);
  \item \textit{inputs}: description of the different inputs  (required);
  \item \textit{params}: description of the parameters data type and user control (optional);
  \item \textit{run}: command to run the demo (required);
  \item \textit{archive}: which parameters and output files are archived after performing an execution with original (uploaded) data (optional);
  \item \textit{results}: displaying the result page (required).
\end{itemize}

\vspace{1em}

The IPOL control panel provides a JSON editor with a simple validator. Most of the syntax errors are detected in real time
and reported by this graphical tool.

%-------------------------------------------------------------------------------
\section{The \emph{general} section}
The general section describes global information about the demo.
It is a set of  (key,value) pairs, described in the following table. The column \emph{req} refers to a required field.

% 
\begin{longtable}{|>{\bf}L{\dimexpr 0.28\linewidth}|L{\dimexpr 
0.57\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 demo\_title         & demo title & yes\\ \hline
 input\_description  & description of the inputs. 
                      It contains HTML as a single string or as an array of string
                      that will be concatenated and separated with spaces.
                     & yes \\ \hline
 param\_description  & description at the top of the para\-meters page,
                      contains HTML as a single string or as an array of string
                      that will be concatenated and separated with spaces.
                      & no
                      \\ \hline
 xlink\_article     & defines the link to the article webpage & yes  \\ \hline
 crop\_maxsize      & limit allowed crop size in both width and height, the string
                      can contain a JavaScript expression which will be evaluated & no \\ \hline
 requirements 	    & specify the particular requirements needed for the execution of the demo separated by commas. e.g. Matlab. & no \\ \hline
 timeout 	    & specify the time in seconds to execute the algorithm. If the execution takes longer than the specified time 
		      the system kills the process.& no \\ \hline
\caption{The \emph{general} section, properties}
\end{longtable}

%-------------------------------------------------------------------------------
\section{The \emph{build} section}

The build section is a set of one or more sets,
each one providing information to obtain and build code needed for the demo.
3 steps are needed to build a piece of code: 

\begin{itemize}
  \item download the code of the demo (with optional userid and password);
  \item optionnaly build a binary from a source code;
  \item copy the binary files in a run context.
\end{itemize}



\begin{longtable}{|>{\bf}L{\dimexpr 0.25\linewidth}|L{\dimexpr 0.6\linewidth}|c|}
\hline
\centering {key}     & \centering {\bf description} & {\bf req} \tabularnewline 
\hline \hline
 url        & full URL link to download the demo source code as a compressed archive & yes \\ \hline
 username   & a username for an URL protected by an authentification & no \\ \hline
 password   & a password for an URL protected by an authentification & no \\ \hline
 construct  & shell command used to compile the downloaded source code & no  \\ \hline
 move       & binary files needed to execute the demo, a comma separated list of file paths
 relative to the build context & yes  \\ \hline
\caption{Build, properties for one piece of code}
\end{longtable}

\paragraph{Example}:\\
\begin{lstlisting}[language=json,firstnumber=1]
"build": {
    "build1": {
        "url": "http://www.ipol.im/pub/art/2014/82/sift_anatomy_20141201.zip",
        "construct": "cd sift_anatomy_20141201 && make",
        "move": "sift_anatomy_20141201/bin/sift_cli, sift_anatomy_20141201/bin/match_cli"
    },
    "build2":{
        "url": "http://dev.ipol.im/~monasse/orthoPose_1.0.tar.gz",
        "construct": "/usr/local/MATLAB/bin/matlab -nodisplay -nosplash -nodesktop -r \"cd orthoPose_1.0/; mcc -m mainPoseEstimation.m -a lib/; exit;\"",
        "move": "orthoPose_1.0/mainPoseEstimation, orthoPose_1.0/run_mainPoseEstimation.sh"
    }
}
\end{lstlisting}

%-------------------------------------------------------------------------------
\section{The \emph{inputs} section}
The inputs section describes the characteristics of the input data for the algorithm.

\subsection{\emph{image} type}

\begin{longtable}{|>{\bf}L{\dimexpr 0.26\linewidth}|L{\dimexpr 0.59\linewidth}|c|}
\hline
\centering {key}     & \centering {\bf description} & {\bf req} \tabularnewline 
\hline \hline
 type         & image & yes \\ \hline
 description  & Short name or description of the input, it will used to display 
the input as the label inside the 'gallery' HTML display & no \\ \hline
 max\_pixels   &  Sets the maximal number of pixels of the input image, 
bigger images will be downsized, if 0 no resizing is done. 
Input can be a number or a simple arithmetic expression as a string that will be evaluated (ex: "1000*1000" = 1 Mpx).  & yes \\ \hline
 max\_weight   & Maximum weight (in bytes) of an input file, prevents uploading 
bigger files.
Input can be a number or a simple arithmetic expression as a string that will be evaluated (ex: "100*1024*1024"= 100 Mb). & no \\ \hline
 dtype        & Expected data type for image to process:
\vspace{-1em}
\begin{itemize}
  \setlength\itemsep{-0.5em}
  \item \textit{1x8i}: gray, unsigned integer 8 bits;
  \item \textit{3x8i}: color, RGB unsigned integer 8 bits;
  \item \textit{1x16i}: gray, unsigned integer 16 bits;
  \item \textit{3x16i}: color, RGB unsigned integer 16 bits.
\end{itemize} & yes \\ \hline
 ext          & input image expected extension (ie. file format) & yes \\ \hline
forbid\_preprocess         & Forbids any pre-processing of the input data by IPOL system. 
Submitted image is kept as-is.
Used by algorithms like noise-estimation or modification detection, where re-sampling will affect results. 
If a processing is needed, according to the expected properties upper, the user will be informed by a message.
& no \\ \hline
\caption{Inputs, \emph{image} type, properties}
\end{longtable}

%-------------------------------------------------------------------------------
\section{The \emph{params} section}
The \emph{params} section describes the set of parameters needed by a demo, their 
constraints and the visual appearance of the user control. It is defined as an array of sets, 
where each set contains (key,value) pairs.


\subsection{ \emph{range} type}

The \emph{range} type returns one numeric value, constrained 
by a minimum, a maximum, and a step. The user control is a slider.


\begin{longtable}{|>{\bf}L{\dimexpr 0.15\linewidth}|L{\dimexpr 
0.7\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type  & range       & yes \\ \hline
 visible  & evaluated Javascript boolean expression. It hides the parameter if
            evaluated to false (if undefined the parameter is visible)& no \\ \hline
 id     & parameter name in lowercase letters  & yes \\ \hline
 label  & name and/or description of the parameter, appears on the left side. & no
                      \\ \hline
 comments & description of the parameter, appears on the right side. & no
                      \\ \hline
 values & set min,max,step and default values using the following key/value 
scheme \{ 'min':val, 'max':val, 'step':val, 'default':val \}. 
Ex: to select a value included in (-1, -0.5, 0, 0.5, 1) write \texttt{"values": \{"min": -5, "max": 5, "step": 0.5\}}  & yes
                      \\ \hline
\caption{Params, \emph{range} type, properties}
\end{longtable}


\subsection{ \emph{selection\_collapsed} type}

The \emph{selection\_collapsed} type returns one string selected by a key (for example, 
a color code selected by name). The user control is a dropdown select.

\begin{longtable}{|>{\bf}L{\dimexpr 0.25\linewidth}|L{\dimexpr 
0.6\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type  & selection\_collapsed    & yes \\ \hline
 visible  & Evaluated Javascript boolean expression which hides the parameter if
            evaluated to false (if undefined the parameter is visible)& no \\ \hline
 id     & parameter name in lowercase letters & yes \\ \hline
 label  & name and/or description of the parameter, appears on the left side. & no
                      \\ \hline
 comments & description of the parameter, appears on the right side. & no
                      \\ \hline
 values & set of (key, value) pairs, where the key is the displayed text and the 
value is the string returned, for example \texttt{"values": \{"black": "000000", "white": "FFFFFF"\}} & yes
                      \\ \hline
 default\_value & defines the default value for this parameter, should be one 
the values defined in 'values'. & yes \\ \hline
\caption{Params, \emph{selection\_collapsed} type, properties}
\end{longtable}

\subsection{ \emph{selection\_radio} type}

The \emph{selection\_radio} returns one string selected by a key (for example, 
a color code selected by name). The user control is a set of radio buttons.

\begin{longtable}{|>{\bf}L{\dimexpr 0.25\linewidth}|L{\dimexpr 
0.6\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type     & selection\_radio    & yes \\ \hline
 visible  & Evaluated Javascript boolean expression which hides the parameter if
            evaluated to false (if undefined the parameter is visible)& no \\ \hline
 id       & parameter name in lowercase letters & yes \\ \hline
 label  & name and/or description of the parameter, appears on the left side. & no
                      \\ \hline
 comments & description of the parameter, appears on the right side. & no
                      \\ \hline
 vertical & boolean, if true use vertical display, otherwise use horizontal
            display (default=false) & no \\ \hline
 values   & set of (key, value) pairs, where the key is the displayed text and the 
value is the string returned, for example \texttt{"values": \{"black": "000000", "white": "FFFFFF"\}} & yes
                      \\ \hline
 default\_value & defines the default value for this parameter, should be one 
the values defined in 'values'. & yes \\ \hline
\caption{Params, \emph{selection\_radio} type, properties}
\end{longtable}

\subsection{ \emph{label} type}

The \emph{label} type returns no value and can be used as a title to separate groups of parameters.

\begin{longtable}{|>{\bf}L{\dimexpr 0.27\linewidth}|L{\dimexpr 
0.58\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type  & label       & yes \\ \hline
 visible  & Evaluated Javascript boolean expression which hides the parameter if
            evaluated to false (if undefined the parameter is visible)& no \\ \hline
 label & HTML text to display, as a single string or as an array of strings& yes
                      \\ \hline
\caption{Params, \emph{label} type, properties}
\end{longtable}


\subsection{ \emph{checkbox} type}

The \emph{checkbox} type returns a boolean value. The user control is a checkbox.


\begin{longtable}{|>{\bf}L{\dimexpr 0.27\linewidth}|L{\dimexpr 
0.58\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type  & checkbox  & yes \\ \hline
 visible  & Evaluated Javascript boolean expression which hides the parameter if
            evaluated to false (if undefined the parameter is visible)& no \\ \hline
 label  & name and/or description of the parameter, appears on the left side. & yes
                      \\ \hline
 comments & description of the parameter, appears on the right side. & no
                      \\ \hline
 id         & parameter name in lowercase letters  & yes \\ \hline
 default\_value & boolean: True for checked & \\ \hline
\caption{Params, \emph{checkbox} type, properties}
\end{longtable}

\subsection{ \emph{numeric} type}

The \emph{numeric} type returns a numeric value validated against constraints (min, max). The user control is an input field.

\begin{longtable}{|>{\bf}L{\dimexpr 0.27\linewidth}|L{\dimexpr 
0.58\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type       & numeric   & yes \\ \hline
 visible    & Evaluated Javascript boolean expression which hides the parameter
              if evaluated to false (if undefined the parameter is visible) & no \\ \hline
 label      & name and/or description of the parameter, appears on the left side. & yes \\ \hline
 comments   & description of the parameter, appears on the right side. & no  \\ \hline
 id         & parameter name in lowercase letters & yes \\ \hline
 values     & set min, max, step and default values using the following key/value scheme \{ 'min':val, 'max':val, 'default':val \} & yes \\ \hline
\caption{Params, \emph{numeric} type, properties}
\end{longtable}

\subsection{ \emph{text} type}

The \emph{text} type returns a string. The user control is an input field.

\begin{longtable}{|>{\bf}L{\dimexpr 0.27\linewidth}|L{\dimexpr 
0.58\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type       & text   & yes \\ \hline
 visible    & Evaluated Javascript boolean expression which hides the parameter
              if evaluated to false (if undefined the parameter is visible) & no \\ \hline
 label      & name and/or description of the parameter, appears on the left side. & yes \\ \hline
 id         & parameter name in lowercase letters & yes \\ \hline
 values     & set maxlength and default values using the following key/value scheme \{ 'maxlength':val, 'default':val \} & no \\ \hline
\caption{Params, \emph{text} type, properties}
\end{longtable}

%-------------------------------------------------------------------------------
\section{The \emph{params\_layout} section}

The default layout of parameters is to stack them together within an 'HTML field'
entitle 'Parameters:'. However, if a demo needs to group together some parameters,
it can use a specific params\_layout section that contains an array of
sets of parameters, where each set is defined by an array containing the group 
title as the first element and the list of parameters ids as the second element,
where the parameters ids are their position in the params section (starting at 0).

\paragraph{Examples}:\\
\begin{lstlisting}[language=json,firstnumber=1]
  "params_layout": [
        [ "General parameters:",          [ 0,1]  ],
        [ "Sampled Gaussian kernel",      [2]     ],
        [ "Lindeberg's smoothing method", [3]     ]
    ],
\end{lstlisting}

%-------------------------------------------------------------------------------
\section{The \emph{run} section}

The \emph{run} section contains one string, the shell command to run a demo.
This command will be executed in an environment where the
binaries defined by the build/copy subsection are available in the \$PATH.
The input files defined in the \emph{input} section are available as arguments
with a normalized name input\_\{0..n\}.\{extension\} (ex: input\_0.png). 
The parameters define in \emph{params} section are available by their id with a 
\$ as a prefix (ex: "id": "width", \$width).


In this example, the demo is executed by the binary file jpegblocks
(compiled and moved in the \emph{build} section), 
with input\_0.png as an input and \$block\_size as a parameter.
\begin{lstlisting}[language=json,firstnumber=1]
  "run": "jpegblocks input_0.png $block_size"\end{lstlisting}


In this example, the execution is conducted by the run.sh script, provided in the
optional demoextras.zip, input\_0.png \$width for arguments. The script may call the binaries compiled in the \emph{build}.
\begin{lstlisting}[language=json,firstnumber=1]
  "run": "${demoextras}/run.sh input_0.png $width"\end{lstlisting}


%-------------------------------------------------------------------------------
\section{The \emph{archive} section}

The \emph{archive} section defines the type of data to archive from each experiments.

\begin{longtable}{|>{\bf}L{\dimexpr 0.28\linewidth}|L{\dimexpr 0.6\linewidth}|c|}
\hline
\centering {key}     & \centering {\bf description} & {\bf req} \tabularnewline 
\hline \hline
 files    & (key,value) pairs where key is the file to archive and value is 
            the associated text information & no \\ \hline
 compressed\_\-files   & compressed files to add in the same format 
as files & no \\ \hline
 params  & list of parameters to archive & no \\ \hline
 info    & info variables to archive in the form of pairs variable:label & no \\ \hline
 enable\_reconstruct & Enable a button to reconstruct an experiment stored in the archive & no \\ \hline
 archive\_always     & The archive will store the experiments even if they are performed with the data proposed by the demo (if the private mode is not set) & no \\ \hline
\caption{The \emph{archive} section, properties}
\end{longtable}


\paragraph{Example}:\\
\begin{lstlisting}[language=json,firstnumber=1]
"archive":
  {
    "enable_reconstruct": true,
    "archive_always": true,
    "files" : 
      { "input_0.png"                 : "input image",
        "primitives.txt"              : "Primitives"
      },
    "params" :  
      [ "high_threshold_canny", 
        "initial_distortion_parameter", 
        "angle_point_orientation_max_difference" ],
    "info"   : { "run_time": "run time" }
  }
\end{lstlisting}

%-------------------------------------------------------------------------------
\section{The \emph{results} section}


The results section controls the ressources to display for an experiment.
It is an array of sets, where each set contains 
(key/value) pairs describing one type of output from the algorithm. There are 
displayed sequentially one below the other, apart from warnings that are 
displayed at the top of the page. The currently available types are described 
below.

%------ gallery  ------
\subsection{ \emph{gallery} type}

The results \emph{gallery} type displays one or more images outputted by th algorithm.

\begin{longtable}{|>{\bf}L{\dimexpr 0.15\linewidth}|L{\dimexpr 0.7\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type       & gallery  & yes \\ \hline
 visible    & Evaluated Javascript boolean expression 
              which hides the result if
              evaluated to false (if undefined the result is visible)& no \\ \hline
 label      & HTML label for the gallery, can be either a single string or 
             a list of string that will be concatenated with whitespace character
              in between. & no \\ \hline
 contents   & inside has Javascript objects with: img, repeat and visible parameters.
 				The key for every object can be an expression to be evaluated in case of repeat
 				functionality.
 			    img wil have either a string with a filename or an array of strings with filenames.
 			    visible is the same a visible field for the gallery but for each item in the gallery.
 			    repeat is a range expression (evaluated in javascript): will create a loop in the 
 			    form idx=0..range-1.
            & yes \\ \hline
 options    & You can specify options for the ImageGallery object. Currently
              'minwidth' and 'minheight' (in pixels) options are available to force
              miminal size of image display. Default values are 300 for both.& no \\ \hline
\caption{Results, \emph{gallery} type, properties}
\end{longtable}

\paragraph{Examples}:\\
Advanced example, mixing repeat, using an array of filenames.
\begin{lstlisting}[language=json,firstnumber=1]
{
  	"type": "gallery",
    "contents": {
        "Input 0": {
            "img":  ["denoised_diff_0.png", "denoised_noiseCurves_L_0.png"]
        },
        "'Scale'+idx": {
            "img":  [
                "'diff_'+idx+'.png'", 
                "'noiseC_L_'+idx+'.png'", 
                "'noiseC_H_'+idx+'.png'"
            ]
            "repeat": "params.nbscales"
        }
    },
    "label": [
        "<p>New Gallery type.</p>"
    ]
}
\end{lstlisting}


%------ gallery_video  ------
\subsection{ \emph{gallery\_video} type}

The \emph{gallery\_video} type uses the gallery class to display images. Its parameters are:

\begin{longtable}{|>{\bf}L{\dimexpr 0.15\linewidth}|L{\dimexpr 0.7\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type       & gallery  & yes \\ \hline
 visible    & Evaluated Javascript boolean expression 
              which hides the result if
              evaluated to false (if undefined the result is visible)& no \\ \hline
 label      & HTML label for the gallery, can be either a single string or 
             a list of string that will be concatenated with whitespace character
              in between. & no \\ \hline
 contents   & inside has javascript objects with: video, repeat and visible parameters.
 				The key for every object can be an expression to be evaluated in case of the use of 
 				repeat functionality.
 			    video will have either a string with a filename or an array of strings with filenames.
 			    visible is the same a visible field for the gallery but for each item in the gallery.
 			    repeat is a range expression (evaluated in javascript): will create a loop in the 
 			    form idx=0..range-1.
            & yes \\ \hline
 options    & You can specify options for the VideoGallery object. Currently
              'minwidth' and 'minheight' (in pixels) options are available to force
              miminal size of video display. Default values are 300 for both.& no \\ \hline
\caption{Results, \emph{gallery\_video} type, properties}
\end{longtable}

\paragraph{Examples}:\\
Advanced example, mixing repeat, visible, using an array of filenames.
\begin{lstlisting}[language=json,firstnumber=1]
{
    "type": "video_gallery",
    "label": "<b>Video gallery</b>",
    "display": "grid",
    "visible": "1==1",
    "contents": {
        "Input_0": {
            "video":  "'input_0.mp4'",
            "visible": "1==1"
        },
        "'Scale_'+idx": {
            "video":  "'scaled_'+idx+'.mp4'",
            "repeat": "4"
        }
    }
}
\end{lstlisting}



%------ file_download  ------
\subsection{ \emph{file\_download} type}

\begin{longtable}{|>{\bf}L{\dimexpr 0.15\linewidth}|L{\dimexpr 0.7\linewidth}|c|}
\hline
\centering {key}     & \centering {\bf description} & {\bf req} \tabularnewline 
\hline \hline
 type      & file\_download  & yes \\ \hline
 visible   & Evaluated Javascript boolean expression which hides the result if
             evaluated to false (if undefined the result is visible)& no \\ \hline
 repeat    & range expression (evaluated in Javascript):
              will create a loop in the form idx=0..range-1 & no \\ \hline
 label     & HTML title associated to the file download. In case of repeat, 
            evaluated as an expression with idx variable, otherwise, can be evaluated
            if it starts with a single quote.& yes \\ \hline
 contents  & either a single string of the filename to download, or a list
              of label:filename pairs for files to download. In case of repeat, 
            evaluated as an expression with idx variable. & yes \\ \hline
\caption{Results, \emph{file\_download} type, properties}
\end{longtable}

\paragraph{Examples}:\\
\begin{lstlisting}[language=json,firstnumber=1]
{ 
    "type"     : "file_download", 
    "label"    : "Download Hough result",
    "contents" : "output_hough.png" 
}
\end{lstlisting}

\begin{lstlisting}[language=json,firstnumber=1]
{
    "type"     : "file_download", 
    "label"    : "<h3>Download computed optical flow:</h3>",
    "contents" : {
        "tiff": "stuff_tvl1.tiff", 
        "flo" : "stuff_tvl1.flo",
        "uv"  : "stuff_tvl1.uv"
    }
}
\end{lstlisting}
Example using 'repeat':
\begin{lstlisting}[language=json,firstnumber=1]
{ 
    "type"     : "file_download", 
    "repeat"   : "params.scales",
    "label"    : "'Download the estimations obtained at scale '+idx",
    "contents" : "'estimation_s'+idx+'.txt'"
}
\end{lstlisting}

%------ html_text  ------
\subsection{ \emph{html\_text} type}

\begin{longtable}{|>{\bf}L{\dimexpr 0.15\linewidth}|L{\dimexpr 0.7\linewidth}|c|}
\hline
\centering {key}     & \centering {\bf description} & {\bf req} \tabularnewline 
\hline \hline
 type      & html\_text  & yes \\ \hline
 visible   & Evaluated Javascript boolean expression 
             which hides the result if
             evaluated to false (if undefined the result is visible)& no \\ \hline
 contents  & An array of strings, that will be concatenated to form the HTML 
             content. This content can contain Javascript expression if it starts
            with a single quote. & yes \\ \hline
\caption{Results, \emph{html\_text} type, properties}
\end{longtable}

\paragraph{Example}:\\
\begin{lstlisting}[language=json,firstnumber=1]
{ 
    "type"          : "html_text", 
    "contents"      : [
        "'<p style=\"font-size:85%\">",
        "* &ldquo;Exact&rdquo; is computed with FIR, ",
        "DCT for &sigma;&nbsp;&gt;&nbsp;2 ",
        "(using '+params.sigma<=2?'FIR':'DCT'+",
        "'</p>'" 
    ] 
}
\end{lstlisting}


%------------ text_file --------------------------
\subsection{ \emph{text\_file} type}

\begin{longtable}{|>{\bf}L{\dimexpr 0.15\linewidth}|L{\dimexpr 0.7\linewidth}|c|}
\hline
\centering {key}     & \centering {\bf description} & {\bf req} \tabularnewline 
\hline \hline
 type      & text\_file  & yes \\ \hline
 visible   & Evaluated Javascript boolean expression 
              which hides the result if
             evaluated to false (if undefined the result is visible)& no \\ \hline
 label     & HTML label & yes \\ \hline
 contents  & text filename to display & yes \\ \hline
 style     & associated CSS style & yes \\ \hline
\caption{Results, \emph{text\_file} type, properties}
\end{longtable}

\paragraph{Example}:\\
\begin{lstlisting}[language=json,firstnumber=1]
{ 
    "type"          : "text_file", 
    "label"         : "<h2>Output<h2>",
    "contents"      : "stdout.txt",
    "style"         : "width:40em;height:16em;background-color:#eee"
}
\end{lstlisting}

%------ warning  ------
\subsection{ \emph{warning} type}

\begin{longtable}{|>{\bf}L{\dimexpr 0.15\linewidth}|L{\dimexpr 
0.7\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} 
\tabularnewline \hline \hline
 type      & warning  & yes \\ \hline
 visible   & Evaluated Javascript boolean expression 
            which hides the result if
             evaluated to false (if undefined the result is visible)& no \\ \hline
 contents  & displayed text, can contain both HTML tags and Javascript code.
expressions of the form '\{\{expression\}\}'. & yes\\ \hline
\caption{Results, \emph{warning} type, properties}
\end{longtable}

\paragraph{Example}:\\
\begin{lstlisting}[language=json,firstnumber=1]
{ 
    "type":"warning", 
    "condition":"sizeX * sizeY < X",
    "contents":"'Needs X pixels ('+sizeX *sizeY+' given)<br/>'"
}
\end{lstlisting}


%------ message  ------
\subsection{ \emph{message} type}

The \emph{message} type displays a text message with a predefined color. This can be 
used for warning or error messages.

\begin{longtable}{|>{\bf}L{\dimexpr 0.15\linewidth}|L{\dimexpr 0.7\linewidth}|c|}
\hline
 \centering {key}     & \centering {\bf description} & {\bf req} \tabularnewline 
\hline \hline
 type       & message  & yes \\ \hline
 visible    & Evaluated Javascript boolean expression which hides the result if
              evaluated to false (if undefined the result is visible)& no \\ \hline
 contents   & a string which will be evaluated by Javascript to get the message. & yes \\ \hline
 textColor  & the name of a color or a CSS-compatible color. & no \\ \hline
\caption{Results, \emph{message} type, properties}
\end{longtable}

\paragraph{Examples}:\\
\begin{lstlisting}[language=json,firstnumber=1]
{    
    "contents": "'Image too small: the input image needs to be at least 42000 pixels to get a reliable estimate<br> Forced to use one bin for the estimation.'", 
    "type": "message", 
    "textColor": "red",
    "visible": "info.sizeX * info.sizeY < 42000" 
}
\end{lstlisting}
