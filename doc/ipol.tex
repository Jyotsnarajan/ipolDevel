% Instructions to modify this document:
% * Remember to ALWAYS execute a git pull BEFORE any commit you make
% * Use the \ToDo{...} command to remark tasks which still need to be done
% * Use the \input{file.tex} command to split the document into several parts
% * Do not change the current LaTeX coding style to yours

% To convert .dia diagrams into PDF:
% 1) Create the diagram with dia (or any other tool)
% 2) Export it as .eps
% 3) use epstopdf to convert to PDF


\documentclass[a4paper,12pt]{article}

\usepackage[utf8]{inputenc}
\usepackage{amsmath,graphicx}
\usepackage{bm}
\usepackage{amssymb}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{subfigure}
\usepackage{ifpdf}
\usepackage{url}
\usepackage{color}
\usepackage[hidelinks]{hyperref}
\usepackage{multirow}
\usepackage{datetime}
\usepackage{comment}
\usepackage{float} % To put figures in their exact place with \begin{figure}[H]
\usepackage{longtable}
\usepackage{tabularx}
\usepackage{listings}
\usepackage{xcolor}

\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
\newcolumntype{C}[1]{>{\centering\arraybackslash}p{#1}}
\newcolumntype{R}[1]{>{\raggedleft\arraybackslash}p{#1}}


% Definitions and commands
\def \np{\vskip 0.25 cm}
\def \ap{\vskip 0.15 cm}

% JSON listing (see 
%  http://tex.stackexchange.com/questions/83085/how-to-improve-listings-display 
% -of- json-files)
\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}

\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
    literate=
     *{0}{{{\color{numb}0}}}{1}
      {1}{{{\color{numb}1}}}{1}
      {2}{{{\color{numb}2}}}{1}
      {3}{{{\color{numb}3}}}{1}
      {4}{{{\color{numb}4}}}{1}
      {5}{{{\color{numb}5}}}{1}
      {6}{{{\color{numb}6}}}{1}
      {7}{{{\color{numb}7}}}{1}
      {8}{{{\color{numb}8}}}{1}
      {9}{{{\color{numb}9}}}{1}
      {:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}


\newcommand{\ToDo}[1]{\textcolor{magenta}{\textbf{[ToDo]} \textbf{#1}}}


\begin{document}


\begin{titlepage}

\begin{center}
\vspace*{-1in}

%Universitat Oberta de Catalunya\\
\vspace*{0.6in}
\begin{Large}
\textbf{The IPOL Demo System 2.0 \\Technical documentation} \\
\end{Large}

\vspace*{0.6in}

\small{Compiled on \today\ at \currenttime}

\vspace*{0.6in}
\rule{80mm}{0.1mm}\\
\vspace*{0.1in}
\end{center}

\end{titlepage}

This documents contains technical documentation for the IPOL Demo System 2.0. Specifically, the architecture of the service-orientted platform, its modules, and the real-time template generation of demos from their textual description.
\vspace*{0.6in}

\textbf{Project direction and team coordination}

Miguel Colom - \url{http://mcolom.info}

\vspace*{0.2in}

\textbf{Software engineers and external consultats (alphabetic order)}

José Arrecio

Miguel Colom

Vincent Firmin

Karl Krissian

Alexis Mongin

Nelson Monzón


%\maketitle
\newpage

\tableofcontents
\newpage
\listoffigures
\newpage

\section{Introduction}
\ToDo{Introduction}

\section{The Demo System Core}
Centralized webservice. Dispatcher. Proxy pattern \cite{GoF}.

The list of datatypes used (images, audio, video, 3D pointclouds, 3D meshes) and how to identify them. The "no type" format for demos which have their own non-standard format.

\ToDo{Document it!}

% The Blobs module
\input{blobs/blobs.tex}

% The Archive module
\input{archive/archive.tex}

% The Demo Description Language and automatic demo generation
\input{ddl/ddl.tex}

\section{DemoInfo module}
This module store the textual description of the demo and allows to ask for specific sections of it. It also stores other demo-related information, as the demo authors, their emails, etc.

It can obtain the system load from {\tt /proc/loadavg}. The first three numbers are the load averages for the past 1, 5, and 15 minutes. Load averages are not normalized for the number of CPUs in a system, so a load  average  of 1 means a single CPU system is loaded all the time while on a 4 CPU system it means it was idle 75\% of the time.
\ToDo{Document it!}

\section{DemoDispatcher module}
In order to distribute the load in several machines, this module checks the work load of each known DemoRunner modules and starts an algorithm demo execution on the less loaded machine. The process is done transparently and from the outside this is the only visible module, since the actual DemoRunners are not directly accesible.
\ToDo{Document it!}

\section{DemoRunner module}
The DemoRunner module has two main tasks. The first is to inform the DemoDispatcher about the load of the machine where it is running. The second task is to execute an algorithm given the parameters and store the results in a temporary directory. It is a requirement that the temporal results can be accessed by different users using the URL (for example, it may contain a key which identifies a specific experiment).
\ToDo{Document it!}

% The Control Terminal 
\input{terminal/terminal.tex}

\section{The Control Panel web application}
In the modular architecture of IPOL all the modules are able to work standalone since they are RESTful servers implementing webservices. However, a coordinated view from both the functional and administrative point of view is needed.

The Control Panel web application offers a unified interface to configure and administrate the platform. For example, the Editors can remove undue experiments for the archive or add new images to a demo.

\ToDo{Document it!}

\section{Automatic testing}
Two kind of tests:
\begin{itemize}
  \item For the IPOL system itself
  \item To ensure good compilation of the algorithm source codes
\end{itemize}

\section{Implementation details}
This section discusses some implementation details and specific configurations needed.

\begin{itemize}
  \item The magic module. We use PIP, not the python-magic package found in most distributions. \ToDo{Explain why}.
  \item List of packages needed and how to install them.
  \item Description of the general requirements needed for a module to be part of the system (start, ping, and shutdown services ; structure of the general launching scrip...
\end{itemize}

List of packages used for installing the system. Packages to be installed with sudo apt-get install :

\begin{itemize}
\item python2.7
\item wget: to donwload ﬁles
\item cmake: to create a multiplatform Makeﬁle easily
\item libtiff5-dev, libjpeg-dev, libpng-dev: open and write TIFF, JPEG, PNG ﬁles.
\item libfftw3-dev: fast DFT operations
\item libgsl0-dev, libeigen3-dev, liblapack-dev, libblas-dev: linear algebra
\item python, python-cherrypy3, python-mako, python-imaging: Python language, webserver, web templating, Python imaging
\item gnuplot, gnuplot-nox: to draw ﬁgures
\item python-pip: to install python packages
\item python-yaml: for parsing
\end{itemize}
Example of another demo system: \url{http://places.csail.mit.edu/demo.html}

Integrate Openseedragon, \url{https://openseadragon.github.io/}

Document the format of the demo package, with desc.jon, images/, extra/, etc

\ToDo{Keep adding!}


\bibliographystyle{plain}
\bibliography{biblio}

\end{document}
% End of document

