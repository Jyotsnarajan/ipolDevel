{ 
  "general": { 
     "demo_title":  "Automatic Lens Distortion Correction Using One-Parameter Division Model",
     "demo_input_description": "",
     "param_title": "",
     "enable_crop": false
  }, 
  "params": [
    {
      "id"            : "high_threshold_canny",
      "type"          : "range", 
      "label"         : "Canny high threshold",
      "values"        : { "min":"0.7", "max":"1.0", "step":"0.05"},
      "type_format"   : "string",
      "default_value" : "0.8",
      "value"         : 0.8
    },            
    {
      "id"            : "initial_distortion_parameter",
      "type"          : "range", 
      "label"         : "Minimum distortion",
      "values"        : { "min":"-0.5", "max":"4.0", "step":"0.1"},
      "type_format"   : "string",
      "default_value" : "0.0",
      "value"         : 0.0
    },            
    {
      "id"            : "final_distortion_parameter",
      "type"          : "range", 
      "label"         : "Maximum distortion",
      "values"        : { "min":"0.0", "max":"4.0", "step":"0.1"},
      "type_format"   : "string",
      "default_value" : "3.0",
      "value"         : 3.0
    },            
    {
      "id"            : "distance_point_line_max_hough",
      "type"          : "range", 
      "label"         : "Max distance lines and associated points",
      "values"        : { "min":"0.0", "max":"4.0", "step":"0.1"},
      "type_format"   : "string",
      "default_value" : "3.0",
      "value"         : 3.0
    },            
    {
      "id"            : "angle_point_orientation_max_difference",
      "type"          : "range", 
      "label"         : "Max distance edge point and line orientations",
      "values"        : { "min":"0.0", "max":"45.0", "step":"1.0"},
      "type_format"   : "string",
      "default_value" : "2.0",
      "value"         : 2.0
    }
  ],
  "results": [
    {
      "type"          : "gallery",
      "label"         : "<h2>Images</h2>",
      "contents"      : {   "Canny" : "output_canny.png", 
                            "Hough" : "output_hough.png",
                            "Output": "output_corrected_image.png",
                            "Input" : "input_0.png"},
      "style"         : "'height:'+sizeY+'px'" 
    },
    {
      "type"          : "text_file", 
      "label"         : "<h2>Additional info<h2>",
      "contents"      : "output.txt",
      "style"         : "'width:'+sizeX+'px;height:14em'"   
    },
    {
      "type"          : "file_download", 
      "label"         : "Download Canny result",
      "contents"      : "output_canny.png"
    },
    {
      "type"          : "file_download", 
      "label"         : "Download Hough result",
      "contents"      : "output_hough.png"
    },
    {
      "type"          : "file_download", 
      "label"         : "Download corrected image",
      "contents"      : "output_corrected_image.png"
    },
    {
      "type"          : "file_download", 
      "label"         : "Download primitives",
      "contents"      : "primitives.txt"
    }
  ],
  "build":
    {
      "url"       : "http://www.ipol.im/pub/art/2014/106/ldm_q1p.zip", 
      "srcdir"    : ".",
      "binaries"  : [ [".","lens_distortion_correction_division_model_1p"] ],
      "flags"     : "OMP=1 -j4"
    }
  ,
  "run": [
     "fnoise -A$anoise -B$bnoise input_0.sel.png scale_s0.rgb",
     "fnoise -A$anoise -B$bnoise -t input_0.sel.png scale_s0.png",
     "subscale -s2 scale_s0.rgb scale_s1.rgb",
     "ponomarenko -p$percentile -b$bins -w$block -m$mean_type -g$curvefilter",
     "writeNoiseCurve.sh estimation_s0.txt 3 curve_s0.png"
  ]

}