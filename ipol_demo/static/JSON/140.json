{ 
  "general": { 
    "demo_title"            :  "Midway Image Equalization",
    "input_description"     : "Please select or upload the image pair to register.",
    "param_description"     : "",
    "is_test"               : false,
    "enable_crop"           : false,
    "xlink_article"         : "http://www.ipol.im/pub/pre/140/"
  }, 
  "build": [
    {
      "build_type"    : "make",
      "url"           : "http://www.ipol.im/pub/pre/140/midway.zip", 
      "srcdir"        : "src_ipol",
      "prepare_make"  : "sed -i -e 's/CXXFLAGS  =/CXXFLAGS  = -include cstring /g' Makefile; mkdir obj; mkdir bin",
      "binaries"      : [ [".","bin/midway"] ],
      "flags"         : "-j4"
    } ]
  ,
  "inputs": [  
      {
          "type"            : "image", 
          "description"     : "first image",
          "max_pixels"      : "1000 * 1000",
          "max_weight"      : "10 * 1024 * 1024",
          "dtype"           : "3x8i",
          "ext"             : ".png"
      },
      {
          "type"            : "image", 
          "description"     : "second image",
          "max_pixels"      : "1000 * 1000",
          "max_weight"      : "10 * 1024 * 1024",
          "dtype"           : "3x8i",
          "ext"             : ".png"
      }
    ],
  "params": [
    {
      "id"            : "dithering",
      "type"          : "range", 
      "label"         : "Dithering",
      "values"        : { "min":0, "max":100, "step":1, "default":0 }
    }
  ],
  "run": [ 
    "midway input_0.png input_1.png output_0.png output_1.png -dithering $dithering > stdout.txt 2>&1"
   ],
  "archive":
    {
      "files" : { 
                  "input_0.orig.png" : "uploaded #1",
                  "input_1.orig.png" : "uploaded #2",
                  "input_0.png"  : "input #1",
                  "input_0.png"  : "input #2",
                  "input_0.png"  : "output #1",
                  "input_0.png"  : "output #2"
                },
      "compressed_files" : { "stdout.txt": "stdout" },
      "params": [ "dithering" ]
    }
  ,
  "results": [
    {
      "type"          : "gallery",
      "label"         : "",
      "contents"      : 
        {   
        "first image"  : "input_0.png", 
        "second image" : "input_1.png", 
        "first output image"  : "output_0.png", 
        "second output image" : "output_1.png"
        },
      "style"         : "height:{{sizeY*ZoomFactor}}px" 
    }
  ]

}