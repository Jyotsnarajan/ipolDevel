{ 
  "general": { 
    "demo_title"            :  "Non-Local Means Denoising",
    "input_description"     : "To use correctly this demo, it is advised to upload good quality noiseless images.  The algorithm will add to the image a white noise with the standard deviation you will select. The denoising algorithm uses only the knowledge of the standard deviation of the noise.",
    "param_description"     : [
        "The algorithm is run in 2 steps:",
        "step 1: a Gaussian noise is added to the input image;",
        "step 2: the NLmeans algorithm is used to denoise the image."
        ],
    "xlink_article"         : "http://www.ipol.im/pub/art/2011/bcm_nlm/"
  }, 
  "build": [
    {
      "build_type" : "make",
      "url"        : "http://www.ipol.im/pub/art/2011/bcm_nlm/nlmeansC.tar.gz", 
      "srcdir"     : "nlmeansC",
      "binaries"   : [ [".","nlmeans_ipol"], [".","img_diff_ipol"], [".","img_mse_ipol"] ],
      "flags"      : "-j4"
    } ]
  ,
  "inputs": [ 
      {
          "type"            : "image", 
          "description"     : "input",
          "max_pixels"      : "700*700",
          "max_weight"      : "10*1024*1024",
          "dtype"           : "3x8i",
          "ext"             : ".png"
      }
    ],
  "params": [
    {
      "id"            : "sigma",
      "type"          : "selection_collapsed", 
      "label"         : "Level (standard deviation) of additive Gaussian noise",
      "values"        : { "2":"2", "5":"5", "10":"10", "15": "15", "20":"20",
                          "30":"30", "35":"35", "40":"40", "50":"50", "60":"60",
                          "70":"70", "80":"80", "90":"90", "100":"100" },
      "default_value" : "10"
    }
  ]
  ,
  "run": [
      "nlmeans_ipol  input_0.sel.png $sigma input_1.png output_1.png",
      "img_diff_ipol input_0.sel.png input_1.png $sigma output_2.png",
      "img_mse_ipol  input_0.sel.png output_1.png >stdout.txt"
  ]
  ,
  "results": [
    {
      "type"          : "gallery",
      "label"         : "",
      "contents"      : {   "Noisy"      : "input_1.png", 
                            "Denoised"   : "output_1.png",
                            "Original"   : "input_0.sel.png",
                            "Difference" : "output_2.png"},
      "style"         : "'height:'+Math.max(200,sizeY)*ZoomFactor+'px'"
    },
    {
      "type"          : "file_download", 
      "label"         : "<b>Download images:</b>",
      "contents"      : { "Noisy"     : "input_1.png",
                          "Denoised"  : "output_1.png",
                          "Original"  : "input_0.sel.png",
                          "Difference": "output_2.png" }
    },
    {
      "type"          : "text_file", 
      "label"         : "<b>Additional info: RMSE and PSNR</b><br/>",
      "contents"      : "stdout.txt",
      "style"         : "''"
    }
  ],
  "archive":
    {
      "files" : { "input_0.orig.png"            : "uploaded image",
                  "input_0.sel.png"             : "selected subimage",
                  "input_1.png"                 : "noisy image",
                  "output_1.png"                : "denoised image",
                  "output_2.png"                : "difference image"
                },
      "params" :  [ "sigma" ],
      "info"   : { "run_time": "run time" }
    }

}