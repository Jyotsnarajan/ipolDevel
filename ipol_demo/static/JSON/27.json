{ 
  "general": { 
    "demo_title"            :  "Color and Contrast Enhancement by Controlled Piecewise Affine Histogram Equalization",
    "input_description"     : "",
    "param_description"     : [
        "<h2>Algorithm Parameters</h2>",
        "<p>",
            "Choose the minimum (smin) and maximum (smax) slope of the affine transformation of image values.",
        "</p>" 
    ],
    "xlink_article"         : "http://www.ipol.im/pub/art/2012/lps-pae/"
  }, 
  "build": [
    {
      "build_type"    : "make",
      "url*previous"  : "http://www.ipol.im/pub/art/2012/lps-pae/piecewise_eq.tgz", 
      "url"           : "http://151.80.24.28:8080/DemoSource/27/piecewise_eq.tgz", 
      "srcdir"        : "piecewise_eq",
      "binaries"      : [ [".","piecewise_equalization"] ],
      "flags"         : "-j4",
      "scripts"       : [ [ "demo_scripts", "compute_hist_and_curves.py"] ]
    } ]
  ,
  "inputs": [ 
      {
          "type"            : "image", 
          "description"     : "input",
          "max_pixels"      : "700*700",
          "max_weight"      : "10 * 1024 * 1024",
          "dtype"           : "3x8i",
          "ext"             : ".png"
      }
    ],
  "params": [
    {
      "id"            : "s1",
      "type"          : "range", 
      "label"         : "smin:",
      "values"        : { "min":0.0, "max":1.0, "step":0.1, "default":0.0 }
    },
    {
      "id"            : "s2",
      "type"          : "range", 
      "label"         : "smax:",
      "values"        : { "min":1.0, "max":10.0, "step":0.1, "default":3.0 }
    }
  ],
  "run": [ 
    "piecewise_equalization $s2 $s1 2  input_0.sel.png output_1_N2.png  output_2_N2.png  pointsN2.txt",
    "piecewise_equalization $s2 $s1 3  input_0.sel.png output_1_N3.png  output_2_N3.png  pointsN3.txt",
    "piecewise_equalization $s2 $s1 4  input_0.sel.png output_1_N4.png  output_2_N4.png  pointsN4.txt",
    "piecewise_equalization $s2 $s1 5  input_0.sel.png output_1_N5.png  output_2_N5.png  pointsN5.txt",
    "piecewise_equalization $s2 $s1 10 input_0.sel.png output_1_N10.png output_2_N10.png pointsN10.txt",
    "piecewise_equalization $s2 $s1 -1 input_0.sel.png output_1_HE.png  output_2_HE.png  pointsHE.txt",
    "compute_hist_and_curves.py"
  ],
  "archive":
    {
      "files" : { 
                  "input_0.orig.png"  : "uploaded image",
                  "input_0.png"       : "original image",
                  "output_1_N2.png"   : "result image 1 N=2 (RGB)",
                  "output_2_N2.png"   : "result image 2 N=2 (I)",
                  "output_1_N3.png"   : "result image 1 N=3 (RGB)",
                  "output_2_N3.png"   : "result image 2 N=3 (I)",
                  "output_1_N4.png"   : "result image 1 N=4 (RGB)",
                  "output_2_N4.png"   : "result image 2 N=4 (I)",
                  "output_1_N5.png"   : "result image 1 N=5 (RGB)",
                  "output_2_N5.png"   : "result image 2 N=5 (I)",
                  "output_1_N10.png"  : "result image 1 N=10 (RGB)",
                  "output_2_N10.png"  : "result image 2 N=10 (I)",
                  "output_1_HE.png"   : "result image 1 HE (RGB)",
                  "output_2_HE.png"   : "result image 2 HE (I)"
                },
      "params" :  [ "s1", "s2" ]
    }
  ,
  "results": [
    {
      "type"          : "gallery",
      "label"         : [
        "<b>Results:</b>",
            "Histogram scale is set to the histogram size of the input image.",
            "Black bars in the histograms indicate overflows and truncated bins.",
            "The contrast change between the original and processed images is",
                " also displayed.",
            "The color code for the contrast change functions is as follows:",
                " identity transform (red),", "algorithm transform (blue),  ",
            "'empirical' transform (transform that better approximates the ",
                "cumulative histograms of both images, green). ",
            "See the paper for a detailed explanation. "
        ],
      "contents"      : 
        {   "Original " : { "Image"                 :"input_0.sel.png", 
                            "Histograms: R, G, B, I":"input_0.sel_hist.png",
                            "Contrast change"       :"identity.png"}, 
            "N=2 (RGB)" : { "Image"                 :"output_2_N2.png", 
                            "Histograms: R, G, B, I":"output_2_N2_hist.png",
                            "Contrast change"       :"pointsN2RGB.png"},
            "N=3 (RGB)" : { "Image"                 :"output_2_N3.png", 
                            "Histograms: R, G, B, I":"output_2_N3_hist.png",
                            "Contrast change"       :"pointsN3RGB.png"},
            "N=4 (RGB)" : { "Image"                 :"output_2_N4.png", 
                            "Histograms: R, G, B, I":"output_2_N4_hist.png",
                            "Contrast change"       :"pointsN4RGB.png"},
            "N=5 (RGB)" : { "Image"                 :"output_2_N5.png", 
                            "Histograms: R, G, B, I":"output_2_N5_hist.png",
                            "Contrast change"       :"pointsN5RGB.png"},
            "N=10 (RGB)": { "Image"                 :"output_2_N10.png", 
                            "Histograms: R, G, B, I":"output_2_N10_hist.png",
                            "Contrast change"       :"pointsN10RGB.png"},
            "HE (RGB)"  : { "Image"                 :"output_2_HE.png", 
                            "Histograms: R, G, B, I":"output_2_HE_hist.png",
                            "Contrast change"       :"pointsHERGB.png"},
            "N=2 (I)"   : { "Image"                 :"output_1_N2.png", 
                            "Histograms: R, G, B, I":"output_1_N2_hist.png",
                            "Contrast change"       :"pointsN2.png"},
            "N=3 (I)"   : { "Image"                 :"output_1_N3.png", 
                            "Histograms: R, G, B, I":"output_1_N3_hist.png",
                            "Contrast change"       :"pointsN3.png"},
            "N=4 (I)"   : { "Image"                 :"output_1_N4.png", 
                            "Histograms: R, G, B, I":"output_1_N4_hist.png",
                            "Contrast change"       :"pointsN4.png"},
            "N=5 (I)"   : { "Image"                 :"output_1_N5.png", 
                            "Histograms: R, G, B, I":"output_1_N5_hist.png",
                            "Contrast change"       :"pointsN5.png"},
            "N=10 (I)"  : { "Image"                 :"output_1_N10.png", 
                            "Histograms: R, G, B, I":"output_1_N10_hist.png",
                            "Contrast change"       :"pointsN10.png"},
            "HE (I)"    : { "Image"                 :"output_1_HE.png", 
                            "Histograms: R, G, B, I":"output_1_HE_hist.png",
                            "Contrast change"       :"pointsHE.png"}
        }
    }
  ]

}