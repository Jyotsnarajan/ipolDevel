{ 
  "general": { 
    "demo_title"            : "An Analysis of the Viola-Jones Face Detection Algorithm",
    "input_description"     : "",
    "param_description"     : "",
    "enable_crop"           : true,
    "is_test"               : false,
    "xlink_article"         : "http://www.ipol.im/pub/art/2014/104/"
  }, 
  "build": [ {
      "build_type"    : "make",
      "url"           : "http://www.ipol.im/pub/art/2014/104/vj_20140328.tar.gz", 
      "srcdir"        : "vj_20140328",
      "prepare_make"  : "make OMP=1 -j -f makefile eigen",
      "binaries"      : [ [".","detect"] ],
      "flags"         : "OMP=1 -j -f makefile"
    } 
    ]
  ,
  "inputs": [ 
      {
          "type"            : "image", 
          "description"     : "input",
          "max_pixels"      : "900*900",
          "max_weight"      : "10*900*900",
          "dtype"           : "3x8i",
          "ext"             : ".png"
      }
    ],
  "params": [
    {
      "id"            : "layer_count",
      "type"          : "range", 
      "label"         : "Layer Count",
      "values"        : { "min":1, "max":31, "step":1, "default": 31 }
    },
    {
      "id"            : "threshold",
      "type"          : "range",
      "label"         :  "Postprocessing Threshold",
      "values"        : { "min":0, "max":10, "step":0.1, "default": 3 }
    }
  ]
  ,
  "run": [ 
      "detect input_0.sel.png $layer_count $threshold",
      "python:zoomfactor = max(1, int(math.ceil(480.0/max(x1-x0,y1-y0))))",
      [ "zoomfactor>1", 
          "echo 'here we should save resized images: really needed ??'" ]
   ]
  ,
  "archive":
    {
      "files" : { 
                  "input_0.sel.png"   : "exact image",
                  "detectedraw.png"   : "raw detection",
                  "ppSkin.png"        : "commands",
                  "ppRobust.png"      : "skin color detection",
                  "ppBoth.png"        : "most refined detection"
                }
    }
  ,
  "results": [
    {
      "type"          : "gallery",
      "label"         : "<h2>Resulting images</h2>",
      "contents"      : { 
        "Original"                  : "input_0.sel.png", 
        "Detected"                  : "detectedraw.png",
        "Skin Check Only"           : "ppSkin.png",
        "Robustness Check Only"     : "ppRobust.png",
        "Skin and Robustness Check" : "ppBoth.png"
      },
      "style"         : "height:{{sizeY*ZoomFactor}}px"
    }
  ]

}