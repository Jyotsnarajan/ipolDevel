<%include file="header_archive.html" />

<div class="archive_index">

<p>
${number_of_experiments} public archives of online experiments with original images since ${firstdate}.<br /> This archive is not moderated.
In case you uploaded images that you don't want that appear in the archive, you can remove them by clicking on the corresponding key and then clicking over the "delete this entry" button. This button appears only for the experiments performed by the user during the last 24 hours.
<br>
In case of copyright infringement or similar problem, please <a href="https://tools.ipol.im/wiki/ref/demo_input/#archive-cleanup">contact us</a> to request the removal of some images.
Some archived content may be deleted by the editorial board for size matters, inadequate content, user requests, or other reasons.
</p>

<p>
<%include file="archive_pages.html" />
</p>

<hr class="clear">
%for archive in archive_list:

<%
    images = {}
    non_images = {}
    
    for files in archive['files']: 
        
        file = files['url']
        import os
        path, file_extension = os.path.splitext(file)
        
        if file_extension.endswith((".png", ".jpg", "files['name'].jpeg")):
            images[file] = [files['name'],files['url_thumb']] 
        else:
            non_images[file] = files['name']
            
    endfor
    
%>

<div class="bucket">
  <table class="info">
     <tr>
     <th>Exp.</th>
     <td><a href="?page=${page}&id_experiment=${archive['id_experiment']}" title="permalink">Experiment ${archive['id_experiment']}</a>
     </td>
     </tr>
    <tr>  
      <th>date </th>
      <td> ${archive['date']}</td>
    </tr>
    </tr>
     %for (parameter, value) in archive['parameters'].items():
    <tr>
      <th>${parameter | h} </th>
      <td>${value | h} </td>
    </tr>
    %endfor  
    <tr>
      <th>files</th>
      <td>
       %for (url,name) in non_images.items():
        <a href="${url}" title="${name | h}">${name}</a>
      %endfor 
      </td>
    </tr>
  </table>
  <table class="thumbnails">
    <tr>
      <th>images</th>
    </tr>
    <tr>
      <td>
        %for (url,image) in images.items():
        <a href="${url}">
          <img class="thumbnail" src="${image[1]}" title="${image[0] | h}" alt="${image[0] | h}"/></a>
        %endfor
      </td>
    </tr>
  </table>
</div>
<hr class="clear">
%endfor


<p>
<%include file="archive_pages.html" />
</p>

</div>

<%include file="footer.html" />


