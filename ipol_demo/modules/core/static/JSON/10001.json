{ 
  "general": { 
    "demo_title"            : "Simple Total Variation Denoising",
    "input_description"     : [ "" ],
    "param_description"     : [ "" ],
    "xlink_article"         : "http://www.ipol.im/"
  }, 
  "build": [
    {
      "build_type": "make",
      "url"       : "http://151.80.24.28:8080/DemoSource/10001/tv.tgz", 
      "srcdir"    : "TV",
      "binaries"  : [  ],
      "scripts"   : [ [ ".", "tv.py"] ]
    }]
  ,
  "inputs": [ 
      {
          "type"            : "image", 
          "description"     : "input",
          "max_pixels"      : "700 * 700",
          "max_weight"      : "10 * 1024 * 1024",
          "dtype"           : "1x8i",
          "ext"             : ".png"
      }
    ],
  "params": [
    {
      "id"            : "algo",
      "type"          : "selection_radio", 
      "vertical"      : true,
      "label"         : "<i>algo</i>",
      "values"        : {"Total Variation":"tv", "Total Generalized Variation":"tgv"},
      "default_value" : "tv"
    },
    {
      "id"            : "addnoise",
      "type"          : "checkbox", 
      "label"         : "Noise",
      "comments"      : "Add Gaussian noise",
      "default_value" : true
    },
    {
      "visible"       : "params.addnoise",
      "id"            : "sigma",
      "type"          : "range", 
      "label"         : "&sigma;",
      "comments"      : "standard deviation of additive Gaussian noise",
      "values"        : {   "min":0.01,   "max":1,  "step":0.01, "default":0.05 }
    },
    {
        "visible"       : "params.algo==='tv'",
        "id"            : "_lambda",
        "type"          : "range", 
        "label"         : "&lambda; (tv)",
        "comments"      : "ratio between denoising and data attachment terms",
        "values"        : { "min":0.01, "max":0.99, "step":0.01, "default":0.07 }
    },
    {
        "visible"       : "params.algo==='tgv'",
        "id"            : "_lambda_tgv",
        "type"          : "range", 
        "label"         : "&lambda; (tgv)",
        "comments"      : "ratio between denoising and data attachment terms",
        "values"        : { "min":0.1, "max":10, "step":0.1, "default":3 }
    }
  ],
  
  "run": [
    "tv.py input_0.sel.png denoised.png $sigma $addnoise $_lambda $_lambda_tgv $algo"
  ],
  "archive":
    {
      "files" : { "input_0.sel.png"         : "selected subimage",
                  "noisy.png"               : "input image",
                  "denoised.png"            : "denoised image"
                },
      "params" :  [ "sigma" , "_lambda"]
    },
  "results": [
    {
      "type"          : "gallery",
      "label"         : "<b>Images:</b>",
      "contents"          : 
        {
            "params.addnoise?Noisy"       : "noisy.png",
            "Denoised"    : "denoised.png",
            "Original"    : "input_0.sel.png",
            "Difference"  : "diff.png"
        }
    }
  ]
}
